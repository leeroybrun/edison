---
id: "26.12-wave4-plan-analysis-and-correct-course"
title: "Plan Mode: plan↔tasks↔QA analysis + correct-course workflow (Spec‑Kit analyze + BMAD checklist)"
type: docs
owner:
session_id:
parent_id:
child_ids:
depends_on:
  - "26.8-wave3-plan-generate-tasks"
  - "26.11-wave3-plan-tasks-list-command"
blocks_tasks:
related:
  - "26.7-wave3-plan-spec-validate-and-similarity"
  - "26.9-wave4-slash-commands-and-start-plan-mode"
claimed_at:
last_active:
continuation_id:
created_at: "2025-12-31T00:00:00Z"
updated_at: "2025-12-31T00:00:00Z"
tags:
  - plan-mode
  - commands
  - qa
  - validation
  - docs
priority: high
estimated_hours:
model:
---

# Plan Mode: plan↔tasks↔QA analysis + correct-course workflow (Spec‑Kit analyze + BMAD checklist)

## Summary

Plan Mode needs an explicit “analyze + correct course” workflow, analogous to Spec‑Kit’s `/speckit.analyze`, but tailored to Edison’s Plan→Tasks→QA model.

This task adds plan-focused slash commands that:
- verify coherence across plan spec ↔ generated tasks ↔ QAs
- detect drift and incomplete coverage
- produce a structured findings table (severity rubric, stable IDs, evidence)
- provide a BMAD-style checklist-driven “correct course” workflow for plan changes mid-stream

## Required Reading

- Plan Mode canonical doc: `.project/plans/plan-1-plan-mode.md`
- Spec‑Kit analyze methodology: `/tmp/edison-vendor-commands/spec-kit/templates/commands/analyze.md`
- BMAD correct-course checklist: `/tmp/edison-vendor-commands/BMAD-METHOD/src/modules/bmgd/workflows/4-production/correct-course/checklist.md`
- Existing Edison prompts:
  - `src/edison/data/commands/plan/plan-mode.md`
  - `src/edison/data/commands/task/task-backlog-coherence.md`

## Objectives

- [ ] Add command definition: `src/edison/data/commands/plan/plan-analyze.md` (read-only coherence report).
- [ ] Add command definition: `src/edison/data/commands/plan/plan-correct-course.md` (checklist workflow for plan changes).
- [ ] `plan-analyze` must require deterministic grounding inputs:
  - `edison plan validate <plan-id> --json` (once implemented)
  - `edison plan tasks <plan-id> --json` (once implemented)
  - `edison task waves --json` (for scheduling constraints)
  - If required commands are missing, halt and report prerequisites.
- [ ] Coherence checks must include:
  - Plan Spec task keys ↔ tasks exist (`plan_id` linkage)
  - Dependency coherence (`depends_on_keys` → concrete `depends_on`)
  - Wave coherence (plan spec wave vs task IDs / wave inference)
  - QA coverage (if `create_qa=true`, each task has a QA record)
  - Drift detection (plan spec changed since last generation; see `generation_history`)
- [ ] Output must include severity rubric and stable finding IDs (Spec‑Kit style).
- [ ] `plan-correct-course` must include explicit halt conditions and a structured checklist (BMAD style):
  - define trigger + evidence
  - assess impact on plan spec, tasks, QA, waves
  - propose a path forward (refine plan, regenerate tasks, or adjust tasks)
  - end with explicit approval gate

## Output Format (STRICT)

For `plan-analyze`:
- Executive summary + metrics (coverage %, drift flags)
- Findings table: `ID`, `Category`, `Severity`, `Evidence`, `Recommendation`
- Ask gate (approval required before suggesting edits)

For `plan-correct-course`:
- Checklist sections with item IDs and `[ ] Done / [ ] N/A / [ ] Action-needed`
- Halt conditions when prerequisites are missing
- Final “Chosen path forward” + Ask gate

## Acceptance Criteria

- [ ] The plan analysis workflow is as structured and reusable as Spec‑Kit analyze.
- [ ] Correct-course workflow is explicitly checklist-driven and halts when missing evidence.
- [ ] All outputs are read-only by default and require approval for any edits.

## Files to Create/Modify

```
# Add
src/edison/data/commands/plan/plan-analyze.md
src/edison/data/commands/plan/plan-correct-course.md
```
