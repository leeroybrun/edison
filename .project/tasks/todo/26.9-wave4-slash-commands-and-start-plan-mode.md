---
id: "26.9-wave4-slash-commands-and-start-plan-mode"
title: "Add slash commands + Plan Mode start prompt (brainstorm/refine/approve workflow)"
type: docs
owner:
session_id:
parent_id:
child_ids:
depends_on:
  - "26.8-wave3-plan-generate-tasks"
  - "26.11-wave3-plan-tasks-list-command"
blocks_tasks:
related:
  - "26.1-wave1-meta-share-plans"
claimed_at:
last_active:
continuation_id:
created_at: "2025-12-28T00:00:00Z"
updated_at: "2025-12-28T00:00:00Z"
tags:
  - plan-mode
  - commands
priority: medium
estimated_hours:
model:
---

# Add slash commands + Plan Mode start prompt (brainstorm/refine/approve workflow)

## Summary

Make Plan Mode usable in IDEs by:
- adding plan commands as Edison **command definition markdown files** so Edison generates slash-command help docs,
- adding a start prompt (or guidance doc) that teaches the LLM the Plan Mode workflow:
  - ask questions
  - create plan draft
  - targeted edits
  - validate
  - approve
  - generate tasks (separate)

## Required Reading

- `.project/plans/plan-1-plan-mode.md`
- `src/edison/data/config/commands.yaml` (platform config + domain selection only)
- `src/edison/data/commands/plan/plan-mode.md` (existing umbrella workflow command)
- `src/edison/core/adapters/components/commands.py` (CommandComposer)
- `src/edison/data/start/START_*.md` patterns

## Objectives

- [ ] Ensure `plan` as a command domain is included in command selection config (so it’s included in generated catalogs).
- [ ] Add Edison command definition markdown files under `src/edison/data/commands/plan/` for:
  - `plan-allocate-id` (runs `edison plan allocate-id`)
  - `plan-new` (runs `edison plan new ...`)
  - `plan-list` (runs `edison plan list ...`)
  - `plan-show` (runs `edison plan show <plan-id>`)
  - `plan-validate` (runs `edison plan validate <plan-id> --json`)
  - `plan-approve` (runs `edison plan approve <plan-id>`)
  - `plan-generate-tasks` (runs `edison plan generate-tasks <plan-id> [--dry-run] [--json]`)
  - `plan-tasks` (runs `edison plan tasks <plan-id> [--json]`)
- [ ] Each plan command definition must incorporate the strongest methodology patterns from Spec‑Kit/OpenSpec/BMAD:
  - **Guardrails first**: read-only until approval; no destructive operations; stop on missing prerequisites.
  - **Structured output contract**: stable headings + tables + severity rubric where applicable.
  - **Approval gate**: if edits are recommended, propose a patch plan and wait for explicit approval.
  - **Deterministic grounding**: require `--json` outputs from Edison CLIs when available.
- [ ] Add a start prompt `START_PLAN_MODE.md` that is composable and teaches the workflow end-to-end:
  - clarify (bounded questions)
  - draft plan + Plan Spec block
  - targeted refinement (no rewrites)
  - validate
  - approve
  - generate tasks/QAs
  - analyze drift / correctness (read-only) and propose changes if needed

## Acceptance Criteria

- [ ] `edison compose commands` produces `.cursor/commands/edison.plan-*.md` (and Claude equivalents if enabled).
- [ ] Start prompt exists under `.edison/_generated/start/` after compose.
- [ ] Prompt explicitly instructs targeted edits rather than rewriting entire plan.
- [ ] Plan command prompts are consistent and “workflow rich” (Spec‑Kit/OpenSpec/BMAD style): guardrails → steps → strict output format → ask gate.

## Files to Create/Modify

```
# Add
src/edison/data/start/START_PLAN_MODE.md
src/edison/data/commands/plan/plan-allocate-id.md
src/edison/data/commands/plan/plan-new.md
src/edison/data/commands/plan/plan-list.md
src/edison/data/commands/plan/plan-show.md
src/edison/data/commands/plan/plan-validate.md
src/edison/data/commands/plan/plan-approve.md
src/edison/data/commands/plan/plan-generate-tasks.md
src/edison/data/commands/plan/plan-tasks.md
```
related:
  - "26.2-wave1-plan-domain-core"
