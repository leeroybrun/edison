# Edison project-specific QA overrides.
#
# This file intentionally contains Edison-repo conventions (e.g. a full-suite
# session-close requirement). Downstream projects using Edison should define
# their own validation presets/evidence requirements here as needed.

validation:
  # Default preset used for per-task iteration in the Edison repo.
  defaultPreset: fast

  # Presets are repo-configurable and can be overridden by downstream projects.
  presets:
    fast:
      name: fast
      description: "Fast per-task validation for iteration (Edison repo)"
      validators:
        - coderabbit
      # required_evidence is intentionally omitted so baseline evidence applies.
      blocking_validators: []

    # Strict preset used for bundle/meta validation (Codex + Claude + CodeRabbit).
    strict:
      name: strict
      description: "Strict validation for bundles/meta tasks (Edison repo)"
      validators:
        - global-codex
        - global-claude
        - coderabbit
      required_evidence:
        - command-type-check.txt
        - command-lint.txt
        - command-test.txt
        - command-build.txt
      blocking_validators:
        - global-codex
        - global-claude

    deep:
      name: deep
      description: "Deep validation required before session close (Edison repo)"
      validators:
        - global-codex
        - global-claude
        - security
        - performance
        - coderabbit
      required_evidence:
        - command-type-check.txt
        - command-test-full.txt
        - command-build.txt
      blocking_validators:
        - global-codex
        - global-claude
        - security
        - performance

  validators:
    global-codex:
      enabled: true
      always_run: false
      blocking: true
      timeout: 1200

    global-claude:
      always_run: false
      blocking: true
      timeout: 1200

    security:
      engine: claude-cli
      blocking: false
      timeout: 900

    performance:
      engine: claude-cli
      blocking: false
      timeout: 900

    coderabbit:
      blocking: false
      always_run: false
      # CodeRabbit runs are best-effort in local/dev workflows and can hang when
      # no PR context is available; keep a short timeout so it remains advisory.
      timeout: 90

    # Keep non-required global validators disabled by default in the Edison repo.
    global-gemini:
      enabled: false

    global-auggie:
      enabled: false

  # Session-close evidence requirement for the Edison repo.
  sessionClose:
    preset: deep

  # Baseline evidence should be high-signal but fast enough to run often.
  evidence:
    requiredFiles:
      - command-type-check.txt
      - command-lint.txt
      - command-test.txt
