version: "1.0.0"

rules:
  - id: RULE.NEXTJS.SERVER_FIRST
    title: "Server Components by Default"
    category: implementation
    blocking: false
    applies_to: [agent]
    sourcePath: packs/nextjs/guidelines/includes/nextjs/app-router.md
    guidance: "Use Server Components unless client interactivity needed. Mark Client Components with 'use client' only when strictly necessary."

  - id: RULE.NEXTJS.APP_ROUTER
    title: "Use App Router"
    category: implementation
    blocking: true
    applies_to: [agent, validator]
    sourcePath: packs/nextjs/guidelines/includes/nextjs/app-router.md
    guidance: "All routes must use App Router (app/ directory), not Pages Router. Organize routes under app/ using nested folders, page.tsx, and layout.tsx."

  - id: RULE.NEXTJS.COLOCATE_UI_STATES
    title: "Co-locate Loading and Error UI"
    category: implementation
    blocking: false
    applies_to: [agent]
    sourcePath: packs/nextjs/guidelines/includes/nextjs/app-router.md
    guidance: "Co-locate loading and error UI with loading.tsx and error.tsx files."

  - id: RULE.NEXTJS.ROUTE_HANDLERS
    title: "Route Handler Best Practices"
    category: implementation
    blocking: false
    applies_to: [agent, validator]
    sourcePath: packs/nextjs/guidelines/includes/nextjs/route-handlers.md
    guidance: "Follow Next.js route handler conventions and best practices."

  - id: RULE.NEXTJS.SERVER_ACTIONS
    title: "Server Actions Pattern"
    category: implementation
    blocking: false
    applies_to: [agent]
    sourcePath: packs/nextjs/guidelines/includes/nextjs/server-actions.md
    guidance: "Use server actions for form submissions and data mutations when appropriate."

  - id: RULE.NEXTJS.ROUTING_STRUCTURE
    title: "Next.js Routing Structure"
    category: architecture
    blocking: false
    applies_to: [agent, validator]
    sourcePath: packs/nextjs/guidelines/includes/nextjs/ROUTING.md
    guidance: "Follow Next.js routing conventions and file-based routing structure."

  - id: RULE.NEXTJS.METADATA
    title: "Metadata API Best Practices"
    category: implementation
    blocking: false
    applies_to: [agent, validator]
    sourcePath: packs/nextjs/guidelines/includes/nextjs/metadata.md
    guidance: "Implement Metadata API best practices including static metadata export and dynamic generateMetadata function."

  - id: RULE.NEXTJS.CACHING
    title: "Caching Strategies"
    category: performance
    blocking: false
    applies_to: [agent, validator]
    sourcePath: packs/nextjs/guidelines/includes/nextjs/caching.md
    guidance: "Optimize performance using caching strategies: leverage fetch options, cache tags, revalidate, and dynamic segment config."
