$schema: https://json-schema.org/draft/2020-12/schema
$id: https://schemas.edison/core/session.schema.yaml
title: Edison Session Schema (Generic)
description: Project-agnostic session structure for Edison framework sessions.
type: object
required:
- id
- state
- meta
properties:
  id:
    type: string
    description: Unique session identifier
    pattern: ^[a-zA-Z0-9_\-\.]+$
    examples:
    - session-123
    - st-g3-all-ac
  state:
    type: string
    description: Current session state
    enum:
    - draft
    - active
    - blocked
    - done
    - closing
    - validated
    - recovery
    - archived
  meta:
    type: object
    description: Session metadata including ownership and orchestration context
    required:
    - sessionId
    - createdAt
    - lastActive
    - status
    properties:
      sessionId:
        type: string
        description: Canonical session identifier
      owner:
        type:
        - string
        - 'null'
        description: Owning agent or user
      mode:
        type: string
        description: Session start mode (e.g., start, resume)
      createdAt:
        type: string
        format: date-time
        description: Timestamp when the session metadata was created
      lastActive:
        type: string
        format: date-time
        description: Timestamp of the last recorded activity
      status:
        type: string
        enum:
        - draft
        - active
        - blocked
        - done
        - closing
        - validated
        - recovery
        - archived
        description: Session status (must match state)
      createdBy:
        type: string
        enum:
        - edison
        - manual
        description: Who/what created this session
      orchestratorProfile:
        type: string
        description: Orchestrator profile used (claude, codex, gemini, etc.)
      autoStarted:
        type: boolean
        description: Whether session was auto-started by Edison
      promptPath:
        type: string
        description: Path to initial prompt file used
      namingStrategy:
        type: string
        enum:
        - edison
        - owner
        - custom
        description: Naming strategy used for session ID
      continuation:
        type: object
        description: Per-session continuation settings (overrides config defaults)
        properties:
          mode:
            type: string
            enum:
            - off
            - soft
            - hard
            description: Continuation enforcement mode for this session
          enabled:
            type: boolean
            description: Optional explicit enable/disable override for this session
          maxIterations:
            type: integer
            minimum: 1
            description: Optional max iteration budget override for this session
          cooldownSeconds:
            type: integer
            minimum: 0
            description: Optional cooldown override between continuation injections
          stopOnBlocked:
            type: boolean
            description: Optional override to stop continuation when session is blocked
        additionalProperties: false
    additionalProperties: false
  phase:
    type: string
    description: Session phase (implementation or validation)
    default: implementation
  ready:
    type: boolean
    description: Whether the session is ready for work
    default: true
  git:
    type: object
    description: Git/worktree metadata
    properties:
      worktreePath:
        type:
        - string
        - 'null'
        description: Absolute filesystem path to the worktree (if enabled)
      branchName:
        type:
        - string
        - 'null'
        description: Git branch name for the session (if worktree enabled)
      baseBranch:
        type: string
        description: Base branch used for session work
        default: main
    additionalProperties: false
  activityLog:
    type: array
    description: Human-friendly activity log entries
    items:
      type: object
      required:
      - timestamp
      - message
      properties:
        timestamp:
          type: string
        message:
          type: string
      additionalProperties: false
  stateHistory:
    type: array
    description: State transition history (from/to/timestamp)
    items:
      type: object
      required:
      - from
      - to
      - timestamp
      properties:
        from:
          type: string
        to:
          type: string
        timestamp:
          type: string
        reason:
          type: string
        ruleViolations:
          type: array
          items:
            type: string
      additionalProperties: false
additionalProperties: false
