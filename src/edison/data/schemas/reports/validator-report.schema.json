{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ValidatorReport",
  "description": "Structured report for validator findings. Created automatically by edison track when validator starts work.",
  "type": "object",
  "required": ["taskId", "round", "validatorId", "model", "verdict", "tracking"],
  "properties": {
    "taskId": {
      "type": "string",
      "description": "Task ID being validated (e.g., '150-wave2-auth-gate')"
    },
    "round": {
      "type": "integer",
      "minimum": 1,
      "description": "Validation round number (starts at 1, increments on revalidation)"
    },
    "validatorId": {
      "type": "string",
      "description": "Validator identifier from .edison/config/validators.yaml (e.g., 'codex-global', 'security', 'ui')"
    },
    "model": {
      "type": "string",
      "description": "Execution backend identifier used for this validation (e.g., 'claude', 'codex', 'gemini', 'auggie', 'coderabbit', 'human')."
    },
    "zenRole": {
      "type": "string",
      "description": "Zen MCP role used (e.g., 'validator-codex-global')"
    },
    "verdict": {
      "type": "string",
      "enum": ["approve", "reject", "blocked", "pending"],
      "description": "Final validation verdict: approve (all checks passed), reject (issues found requiring fixes), blocked (cannot complete validation), pending (in progress)"
    },
    "findings": {
      "type": "array",
      "description": "Issues discovered during validation",
      "items": {
        "type": "object",
        "required": ["severity", "category", "description"],
        "properties": {
          "severity": {
            "type": "string",
            "enum": ["critical", "high", "medium", "low", "info"],
            "description": "Issue severity"
          },
          "category": {
            "type": "string",
            "description": "Issue category (e.g., 'security', 'performance', 'correctness', 'style', 'accessibility')"
          },
          "description": {
            "type": "string",
            "description": "What the issue is"
          },
          "location": {
            "type": "string",
            "description": "File path and line number or function name where issue was found"
          },
          "recommendation": {
            "type": "string",
            "description": "How to fix this issue"
          },
          "blocking": {
            "type": "boolean",
            "default": true,
            "description": "Whether this issue blocks task promotion"
          }
        }
      },
      "default": []
    },
    "strengths": {
      "type": "array",
      "description": "Positive observations (good patterns, well-implemented features)",
      "items": {
        "type": "string"
      },
      "default": []
    },
    "context7Used": {
      "type": "boolean",
      "description": "Whether Context7 was queried for post-training packages during validation"
    },
    "context7Packages": {
      "type": "array",
      "description": "Post-training packages queried via Context7 (if applicable)",
      "items": {
        "type": "string"
      }
    },
    "evidenceReviewed": {
      "type": "array",
      "description": "Evidence files reviewed during validation (e.g., test output, build logs, git diff)",
      "items": {
        "type": "string"
      },
      "default": []
    },
    "summary": {
      "type": "string",
      "description": "High-level summary of validation results for the QA brief"
    },
    "followUpTasks": {
      "type": "array",
      "description": "Follow-up tasks identified by this validator",
      "items": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "severity": {
            "type": "string",
            "enum": ["low", "medium", "high", "critical"]
          },
          "blocking": {
            "type": "boolean",
            "description": "Whether this must be completed before current task can be approved"
          }
        }
      },
      "default": []
    },
    "tracking": {
      "type": "object",
      "description": "Process tracking metadata - auto-populated by edison track CLI",
      "required": ["processId", "startedAt"],
      "properties": {
        "processId": {
          "type": "integer",
          "description": "PID of the validator process (auto-populated)"
        },
        "startedAt": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when validation started (auto-populated)"
        },
        "lastActive": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of last heartbeat/activity (optional)"
        },
        "completedAt": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when validation completed (auto-populated on edison track complete)"
        },
        "hostname": {
          "type": "string",
          "description": "Machine hostname (for distributed validation)"
        },
        "continuationId": {
          "type": "string",
          "description": "Zen MCP continuation ID (if applicable)"
        }
      },
      "required": ["processId", "startedAt", "completedAt"]
    }
  }
}
