mcp:
  config_file: ".mcp.json"
  # Any existing `.mcp.json` entries with these id prefixes are considered Edison-managed.
  # They will be removed when running `edison mcp configure` unless they are present in `mcp.servers`.
  managed_prefixes: ["edison-"]
  tool_names:
    edison_pal_clink: "mcp__edison-pal__clink"
  servers:
    edison-pal:
      # Portable: use uvx to run pal-mcp-server from git
      # This works on any machine with uvx installed (pip install uv)
      command: "uvx"
      args:
        - "--from"
        - "git+https://github.com/BeehiveInnovations/pal-mcp-server.git"
        - "pal-mcp-server"
      # Script-based command variant (preferred for local + deterministic setups).
      # `edison init --mcp-script` copies `scripts/pal/*.sh` into `{PROJECT_ROOT}/{PROJECT_CONFIG_DIR}/scripts/pal/`.
      script:
        command: "{PROJECT_ROOT}/{PROJECT_CONFIG_DIR}/scripts/pal/run-server.sh"
        args: []
      env:
        PAL_WORKING_DIR: "{PROJECT_ROOT}"
        CLI_CLIENTS_CONFIG_PATH: "{PROJECT_ROOT}/.pal/conf/cli_clients"
        # Pal MCP exposes many AI-powered tools by default; Edison only needs clink.
        # Keep context bloat minimal by disabling everything except clink (+ essential listmodels/version).
        DISABLED_TOOLS: "chat,thinkdeep,planner,consensus,codereview,precommit,debug,secaudit,docgen,analyze,refactor,tracer,testgen,challenge,apilookup"
        # pal-mcp-server currently requires at least one provider configured at startup,
        # even if we only use `clink`. Provide a safe local default (Ollama OpenAI-compatible)
        # so the server can boot without embedding secrets in .mcp.json.
        # If you don't use Ollama, this is still harmless unless you call provider-backed tools.
        CUSTOM_API_URL: "http://127.0.0.1:11434/v1"
      setup:
        require:
          commands:
            - "uvx"
        instructions: |
          Install uvx: pip install uv
          Or clone pal-mcp-server: git clone https://github.com/BeehiveInnovations/pal-mcp-server.git ~/pal-mcp-server
          Configure API keys in {PROJECT_ROOT}/.pal/.env
    context7:
      command: "npx"
      args:
        - "-y"
        - "@upstash/context7-mcp@latest"
      env: {}
      setup:
        require:
          commands:
            - "npx"
    sequential-thinking:
      command: "npx"
      args:
        - "-y"
        - "@modelcontextprotocol/server-sequential-thinking"
      env: {}
      setup:
        require:
          commands:
            - "npx"
