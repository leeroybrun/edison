# Setup wizard configuration
setup:
  # Version for future migrations
  version: "1.0"

  # Modes available
  modes:
    - id: basic
      name: "Basic Setup"
      description: "Essential configuration for getting started"
    - id: advanced
      name: "Advanced Setup"
      description: "Full configuration including paths, state machine, validators"

  # Questions for basic mode
  basic:
    - id: project_name
      prompt: "Project name"
      type: string
      default: "{{ detected.project_name }}"
      required: true
      help: "Name of your project (used in documentation and config)"

    - id: project_type
      prompt: "Project type"
      type: choice
      source: static
      options:
        - "Full-stack web application"
        - "Backend API / service"
        - "Frontend UI application"
        - "Library"
        - "CLI tool"
        - "Other"
      default: "Other"
      help: "Type of project (helps select appropriate packs)"

    - id: packs
      prompt: "Technology packs"
      type: multiselect
      source: discover_packs
      default: []
      help: "Select technology packs to enable (discovered from bundled + .edison/packs/)"

    - id: orchestrators
      prompt: "IDE orchestrators"
      type: multiselect
      source: discover_orchestrators
      default: ["claude"]
      help: "Select which IDE integrations to generate"

    - id: database
      prompt: "Database"
      type: choice
      source: static
      options:
        - "PostgreSQL"
        - "MySQL"
        - "SQLite"
        - "MongoDB"
        - "None"
      default: "None"

    - id: auth_provider
      prompt: "Authentication"
      type: choice
      source: static
      options:
        - "None"
        - "Third-party (enable via packs)"
        - "Custom"
      default: "None"

    - id: enable_worktrees
      prompt: "Enable git worktrees?"
      type: boolean
      default: false
      help: "Use git worktrees for session isolation"

    - id: ci_lint
      prompt: "Lint command"
      type: string
      default: ""

    - id: ci_test
      prompt: "Test command"
      type: string
      default: ""

    - id: ci_build
      prompt: "Build command"
      type: string
      default: ""

    - id: ci_type_check
      prompt: "Type check command"
      type: string
      default: ""

  # Additional questions for advanced mode
  advanced:
    - id: project_config_dir
      prompt: "Project config directory"
      type: string
      default: ".edison"
      help: "Where to store Edison project configuration"
      validation: "^[.a-zA-Z0-9_-]+$"

    - id: project_management_dir
      prompt: "Project management directory"
      type: string
      default: ".project"
      help: "Where to store sessions, tasks, and QA artifacts"
      validation: "^[.a-zA-Z0-9_-]+$"

    - id: task_states
      prompt: "Task state folders"
      type: list
      default: ["todo", "wip", "blocked", "done", "validated"]
      help: "Folder names for task states"

    - id: session_states
      prompt: "Session state folders"
      type: list
      default: ["active", "closing", "recovery", "waiting", "wip"]
      help: "Folder names for session states"

    - id: task_states_config
      prompt: "Configure task state directories"
      type: dict
      help: "Map state names to directory names"

    - id: session_states_config
      prompt: "Configure session state directories"
      type: dict
      help: "Map session states to directory names"

    - id: validators
      prompt: "Enable validators"
      type: multiselect
      source: discover_validators
      default: []
      help: "Select which validators to enable (bundled + pack validators)"

    - id: agents
      prompt: "Enable agents"
      type: multiselect
      source: discover_agents
      default: []
      help: "Select which agents to enable (bundled + pack agents)"

    - id: tdd_enforcement
      prompt: "TDD enforcement level"
      type: choice
      source: static
      options: ["strict", "warn", "off"]
      default: "warn"

    - id: coverage_threshold
      prompt: "Code coverage threshold (%)"
      type: integer
      default: 90
      validation: "0-100"

# Discovery sources configuration
# NOTE: Discovery is handled programmatically by SetupDiscovery class
# which uses bundled edison.data + project .edison/ directories.
# These settings are for reference/documentation only.
discovery:
  # Packs are discovered from:
  # - Bundled: edison.data/packs/
  # - Project: .edison/packs/
  packs:
    bundled: "edison.data/packs"
    project: ".edison/packs"

  # Orchestrators from bundled config
  orchestrators:
    bundled_config: "edison.data/config/orchestrator.yaml"
    fallback: ["claude", "cursor", "codex"]

  # Validators from bundled + packs
  validators:
    bundled_config: "edison.data/config/validators.yaml"
    bundled_pack_pattern: "edison.data/packs/*/config/validators.yml"
    project_pack_pattern: ".edison/packs/*/config/validators.yml"

  # Agents from bundled + packs
  agents:
    bundled_config: "edison.data/config/agents.yaml"
    bundled_agents_dir: "edison.data/agents"
    bundled_pack_pattern: "edison.data/packs/*/config/agents.yml"
    project_pack_pattern: ".edison/packs/*/config/agents.yml"
