session:
  paths:
    root: "{PROJECT_MANAGEMENT_DIR}/sessions"
    archive: "{PROJECT_MANAGEMENT_DIR}/archive"
    tx: "{PROJECT_MANAGEMENT_DIR}/sessions/_tx"
    templates:
      primary: "{PROJECT_CONFIG_DIR}/sessions/TEMPLATE.json"
      repo: "{PROJECT_CONFIG_DIR}/sessions/TEMPLATE.json"
  # Hook-safe, deterministic session context refresher used by:
  # - `edison session context`
  # - `edison session next` (payload + human output)
  # - Claude Code hooks via templates/hooks/*
  context:
    payload:
      # Keys included in JSON payloads (both `session context --json` and `session next`).
      fields:
        - isEdisonProject
        - projectRoot
        - sessionId
        - sessionState
        - worktreePath
        - currentTaskId
        - currentTaskState
        - activePacks
        - constitutions
    render:
      markdown:
        enabled: true
        heading: "## Edison Context"
        fields:
          - projectRoot
          - constitutions
          - session
          - loopDriver
          - worktreePath
          - currentTask
          - activePacks
      next:
        enabled: true
        heading: "Edison Context:"
        fields:
          - projectRoot
          - constitutions
          - session
          - loopDriver
          - worktreePath
          - currentTask
          - activePacks
  # Human-readable `edison session next` output configuration.
  next:
    output:
      headerTemplate: "═══ Session {sessionId} – Next Steps ═══"
      footerTemplate: "═══ End of Next Steps ═══"
      sections:
        context: { enabled: true }
        completion: { enabled: true }
        rules: { enabled: true }
        actions: { enabled: true }
        blockers: { enabled: true }
        reportsMissing: { enabled: true }
        recommendations: { enabled: true }
        followUpsPlan: { enabled: true }
  recovery:
    timeoutHours: 8
    staleCheckIntervalHours: 1
    clockSkewAllowanceSeconds: 300
    defaultTimeoutMinutes: 60
  validation:
    idRegex: "^[a-zA-Z0-9_\\-\\.]+$"
    maxLength: 64
  states:
    draft: "draft"
    active: "wip"
    closing: "done"
    done: "done"
    blocked: "blocked"
    validated: "validated"
    recovery: "recovery"
    archived: "archived"
  defaults:
    initialState: "active"
  lookupOrder:
    - "active"
    - "draft"
    - "closing"
    - "done"
    - "blocked"
    - "validated"
    - "recovery"
    - "archived"
  worktree:
    uuidSuffixLength: 6
    timeouts:
      health_check: 10
      fetch: 60
      checkout: 30
      worktree_add: 30
      clone: 60
      install: 300
      branch_check: 10
      prune: 10
  transaction:
    minDiskHeadroom: 5242880
