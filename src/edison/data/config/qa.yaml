# QA and Validation Configuration
# Configuration for quality assurance, evidence tracking, and validation workflows

version: "1.0.0"

validation:
  # File context settings (used for validator triggering and rules routing).
  # These patterns exclude Edison-managed metadata/runtime artifacts so that
  # "modifiedFiles" reflects product/code changes rather than workflow noise.
  fileContext:
    ignorePatterns:
      - ".project/**"
      - ".edison/_generated/**"

  # Session ID to use for validation transactions when no active session exists
  # This is used as a fallback identifier for validation operations that
  # are not tied to a specific development session
  defaultSessionId: "validation-session"

  # Required evidence filenames are defined canonically in `config/validators.yaml`
  # under `validation.requiredEvidenceFiles` to avoid duplication.

  # Evidence collection settings
  evidence:
    # Minimum files required for validation to proceed
    minRequiredFiles: 4

    # File patterns that should be collected as evidence
    patterns:
      - "command-*.txt"
      - "command-coderabbit.txt"
      - "context7-*.md"
      - "context7-*.txt"
      - "validator-*-report.md"
    # Canonical mapping for evidence filenames referenced in prompts/guides.
    # Templates should prefer {{function:evidence_file("<name>")}} over literals.
    files:
      type-check: "command-type-check.txt"
      lint: "command-lint.txt"
      test: "command-test.txt"
      build: "command-build.txt"

  # Policy cap for QA re-validation loops. Tools may use this to guide UX and
  # enforce limits in future guardrails.
  maxRounds: 3

  # Transaction settings
  transaction:
    # Maximum age of validation transactions before cleanup (hours)
    maxAgeHours: 24

    # Whether to auto-cleanup stale transactions
    autoCleanup: true

orchestration:
  # Maximum concurrent validator agents
  # Per-validator timeout (seconds)
  validatorTimeout: 300

  # Whether Edison may execute external CLI validator engines (codex/claude/gemini/etc).
  # Default is false for safety and test determinism; enable via .edison/config/qa.yaml when desired.
  allowCliEngines: false

  # Execution mode: parallel or sequential
  executionMode: parallel
