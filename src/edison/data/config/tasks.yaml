tasks:
  paths:
    root: "{PROJECT_MANAGEMENT_DIR}/tasks"
    qaRoot: "{PROJECT_MANAGEMENT_DIR}/qa"
    metaRoot: "{PROJECT_MANAGEMENT_DIR}/tasks/meta"
    # Artifact templates are composed into `{PROJECT_CONFIG_DIR}/_generated/templates/`.
    # Task/QA creation should source templates from there for pack/project overlays.
    template: "{PROJECT_CONFIG_DIR}/_generated/templates/TASK.md"
    qaTemplate: "{PROJECT_CONFIG_DIR}/_generated/templates/QA.md"
    evidenceSubdir: "validation-evidence"
  defaults:
    ownerPrefix: "- **Owner:** "
    validatorOwnerPrefix: "- **Validator Owner:** "
    statusPrefix: "- **Status:** "
    claimedPrefix: "  - **Claimed At:** "
    lastActivePrefix: "  - **Last Active:** "
    continuationPrefix: "  - **Continuation ID:** "
  integrations:
    # Optional external-source synchronization for imported tasks (fail-open).
    # These hooks run via state-machine actions (workflow.statemachine.task.*.actions).
    externalSync:
      enabled: true
      onTaskValidated: true
      speckit:
        markTaskCheckbox: true
      openspec:
        markAllCheckboxes: true
  similarity:
    # Deterministic duplicate/similarity detection used by:
    # - `edison session next` follow-up suggestions
    # - `edison task similar` CLI
    topK: 5
    threshold: 0.55
    useShingles: true
    shingleSize: 3
    titleWeight: 0.7
    bodyWeight: 0.3
    # Optional semantic-assisted similarity. When enabled, Edison uses configured
    # memory providers as query expansions, but still maps candidates back onto
    # real tasks using the deterministic TaskSimilarityIndex.
    semantic:
      enabled: false
      # Optional: restrict to specific memory provider IDs (memory.providers.<id>).
      providers: []
      maxHits: 5
      # Available placeholders: {query}, {project_root}
      queryTemplate: "{query}"
    # Optional pre-create duplicate checks (CLI-only). When enabled, commands that
    # create tasks (including follow-ups) will warn or block if duplicates exist.
    preCreate:
      enabled: false
      # warn | block | none
      action: warn
      # Optional overrides; when null, tasks.similarity.threshold/topK are used.
      threshold: null
      topK: null
      # Optional states filter; when null, all states are considered.
      states: null  # Derived readiness/blocked semantics computed from the graph.
  # NOTE: Values are semantic state keys, resolved via WorkflowConfig.get_semantic_state().
  readiness:
    # A todo task is "ready" when all dependencies are in one of these satisfied states.
    dependencySatisfiedStates: ["done", "validated"]
    # If a dependency id cannot be found in the task graph, treat it as blocking.
    treatMissingDependencyAsBlocked: true
