validation:
  dimensions:
    functionality: 30
    reliability: 25
    security: 20
    maintainability: 15
    performance: 10
  cache:
    directory: "{PROJECT_CONFIG_DIR}/_generated/validators"
  requiredEvidenceFiles:
    - command-type-check.txt
    - command-lint.txt
    - command-test.txt
    - command-build.txt
  execution:
    mode: parallel        # parallel | sequential
    concurrency: 4        # max parallel validators when mode=parallel
    timeout: 300          # per-validator timeout in seconds

  # Tier order defines the logical groupings of validators
  # Tiers are referenced in waves to define execution order and behavior
  tierOrder:
    - global
    - critical
    - specialized

  # Validation waves define execution groups with ordering and failure behavior
  # Waves allow configurable validator execution strategies
  waves:
    - name: critical
      tiers: [global, critical]
      execution: parallel         # parallel | sequential
      continue_on_fail: false     # Stop all validation if any validator in this wave fails
      requires_previous_pass: false
    - name: comprehensive
      tiers: [specialized]
      execution: parallel
      continue_on_fail: true      # Continue even if previous wave failed
      requires_previous_pass: true # Only run if critical wave passed

  roster:
    global:
      # Three validators using the SAME prompt but different models for multiple perspectives
      - id: global-codex
        name: Global Validator (Codex)
        model: codex
        interface: clink
        role: codereviewer
        zenRole: validator-global-codex
        specFile: _generated/validators/global.md  # Same prompt
        triggers: ["*"]
        alwaysRun: true
        priority: 1
        context7Required: true
        context7Packages: [next, react, uistylescss, zod, typescript, framer-motion]
        scope: comprehensive
        outputFormat: GlobalValidationReport
        reportSection: "Validator Findings & Verdicts > Global (Codex)"
      - id: global-claude
        name: Global Validator (Claude)
        model: claude
        interface: Task
        role: code-reviewer
        zenRole: validator-global-claude
        specFile: _generated/validators/global.md  # Same prompt
        triggers: ["*"]
        alwaysRun: true
        priority: 1
        context7Required: true
        context7Packages: [next, react, uistylescss, zod, typescript, framer-motion]
        scope: comprehensive
        outputFormat: GlobalValidationReport
        reportSection: "Validator Findings & Verdicts > Global (Claude)"
      - id: global-gemini
        name: Global Validator (Gemini)
        model: gemini
        interface: clink
        role: codereviewer
        zenRole: validator-global-gemini
        specFile: _generated/validators/global.md  # Same prompt
        triggers: ["*"]
        alwaysRun: true
        priority: 1
        context7Required: true
        context7Packages: [next, react, uistylescss, zod, typescript, framer-motion]
        scope: comprehensive
        outputFormat: GlobalValidationReport
        reportSection: "Validator Findings & Verdicts > Global (Gemini)"
    critical:
      - id: security
        name: Security Validator
        model: codex
        interface: clink
        role: codereviewer
        zenRole: validator-security
        specFile: critical/security.md
        triggers: ["*"]
        alwaysRun: false
        priority: 2
        context7Required: true
        context7Packages: [next, zod]
        focus: [authentication, authorization, input-validation, sql-injection, xss, csrf, secrets]
        blocksOnFail: true
        outputFormat: SecurityReport
        reportSection: "Validator Findings & Verdicts > Security"
      - id: performance
        name: Performance Validator
        model: codex
        interface: clink
        role: codereviewer
        zenRole: validator-performance
        specFile: critical/performance.md
        triggers: ["*"]
        alwaysRun: false
        priority: 2
        context7Required: true
        context7Packages: [next, react]
        focus: [bundle-size, queries, n-plus-1, caching, memory-leaks]
        blocksOnFail: true
        outputFormat: PerformanceReport
        reportSection: "Validator Findings & Verdicts > Performance"
      - id: coderabbit
        name: CodeRabbit AI Review
        type: external  # NEW: external tool validator
        model: codex    # LLM that processes the output
        interface: clink
        role: codereviewer
        zenRole: validator-coderabbit
        specFile: critical/coderabbit.md
        command: "coderabbit review --prompt-only --type uncommitted"
        triggers: ["*"]
        alwaysRun: false  # Run on demand or when explicitly requested
        priority: 2
        timeout: 600
        blocksOnFail: true
        context7Required: false
        outputFormat: CodeRabbitReport
        reportSection: "Validator Findings & Verdicts > CodeRabbit"
        evidenceFile: "command-coderabbit.txt"
    specialized:
      - id: react
        name: React Validator
        model: codex
        interface: clink
        role: codereviewer
        zenRole: validator-react
        specFile: specialized/react.md
        triggers: ["**/*.tsx", "**/*.jsx", "**/components/**/*"]
        alwaysRun: false
        priority: 3
        context7Required: true
        context7Packages: [react, uistylescss]
        blocksOnFail: false
        outputFormat: ReactReport
      - id: nextjs
        name: nextjs Validator
        model: codex
        interface: clink
        role: codereviewer
        zenRole: validator-nextjs
        specFile: specialized/nextjs.md
        triggers: ["app/**/*.tsx", "**/route.ts", "**/layout.tsx", "**/page.tsx"]
        alwaysRun: false
        priority: 3
        context7Required: true
        context7Packages: [next, react]
        blocksOnFail: false
        outputFormat: nextjsReport
      - id: api
        name: API Validator
        model: codex
        interface: clink
        role: codereviewer
        zenRole: validator-api
        specFile: specialized/api.md
        triggers: ["**/api/**/*.ts", "**/route.ts"]
        alwaysRun: false
        priority: 3
        context7Required: true
        context7Packages: [next, zod, typescript]
        blocksOnFail: false
        outputFormat: ApiReport
      - id: prisma
        name: Prisma Validator
        model: codex
        interface: clink
        role: codereviewer
        zenRole: validator-database
        specFile: specialized/database.md
        triggers: ["schema.*", "**/*.sql", "prisma/**/*", "migrations/**/*", "db/**/*", "schema.prisma"]
        alwaysRun: false
        priority: 3
        context7Required: true
        context7Packages: [prisma]
        blocksOnFail: true
        outputFormat: DatabaseReport
      - id: testing
        name: Testing Validator
        model: codex
        interface: clink
        role: codereviewer
        zenRole: validator-testing
        specFile: specialized/testing.md
        triggers: ["**/*.test.ts", "**/*.test.tsx", "**/*.spec.ts", "**/*.spec.tsx"]
        alwaysRun: false
        priority: 3
        context7Required: false
        context7Packages: [typescript, vitest]
        blocksOnFail: true
        outputFormat: TestingReport
  blocking_validators:
    - global-codex
    - global-claude
    - security
    - performance
    - database
    - testing
  artifactPaths:
    bundleSummaryFile: "bundle-approved.json"
    implementationReportFile: "implementation-report.json"
  approvalCriteria:
    globalValidators:
      global-codex: "MUST approve (blocks task on fail)"
      global-claude: "MUST approve (blocks task on fail)"
      global-gemini: "SHOULD approve (non-blocking, consensus reinforcement)"
    criticalValidators:
      security: "MUST approve (blocks task on fail)"
      performance: "SHOULD approve (warning only, doesn't block)"
    specializedValidators:
      prisma: "MUST approve (blocks task on fail)"
      testing: "MUST approve (blocks task on fail)"
