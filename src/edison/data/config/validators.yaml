validation:
  dimensions:
    functionality: 30
    reliability: 25
    security: 20
    maintainability: 15
    performance: 10

  cache:
    directory: "{PROJECT_CONFIG_DIR}/_generated/validators"

  requiredEvidenceFiles:
    - command-type-check.txt
    - command-lint.txt
    - command-test.txt
    - command-build.txt

  execution:
    mode: parallel        # parallel | sequential
    concurrency: 4        # max parallel validators when mode=parallel
    timeout: 300          # per-validator timeout in seconds

  # Defaults for validator assignment
  defaults:
    wave: comprehensive   # Default wave for validators without explicit wave assignment

  # Engine definitions (execution backends)
  # Each engine defines how to execute validators using that backend
  engines:
    codex-cli:
      type: cli
      command: "codex"
      subcommand: "exec"
      output_flags: []
      read_only_flags: []
      response_parser: codex

    claude-cli:
      type: cli
      command: "claude"
      subcommand: "-p"
      output_flags: ["--output-format", "json"]
      read_only_flags: ["--permission-mode", "plan"]
      response_parser: claude

    gemini-cli:
      type: cli
      command: "gemini"
      subcommand: "-p"
      output_flags: ["--output-format", "json"]
      read_only_flags: []
      response_parser: gemini

    auggie-cli:
      type: cli
      command: "auggie"
      subcommand: ""
      output_flags: ["--output-format", "json"]
      read_only_flags: ["--print", "--quiet"]
      response_parser: auggie

    coderabbit-cli:
      type: cli
      command: "coderabbit"
      subcommand: "review"
      output_flags: []
      read_only_flags: ["--prompt-only"]
      response_parser: coderabbit

    zen-mcp:
      type: delegated
      description: "Generate delegation instructions for orchestrator"

  # Flat validator definitions
  # Each validator references an engine and optionally a fallback
  validators:
    # Global validators - always run, use same prompt with different models
    global-codex:
      name: "Global Validator (Codex)"
      engine: codex-cli
      fallback_engine: zen-mcp
      prompt: "_generated/validators/global.md"
      wave: critical
      always_run: true
      blocking: true
      timeout: 300
      context7_required: true
      context7_packages: [next, react, uistylescss, zod, typescript, framer-motion]
      triggers: ["*"]
      focus: []

    global-claude:
      name: "Global Validator (Claude)"
      engine: claude-cli
      fallback_engine: zen-mcp
      prompt: "_generated/validators/global.md"
      wave: critical
      always_run: true
      blocking: true
      timeout: 300
      context7_required: true
      context7_packages: [next, react, uistylescss, zod, typescript, framer-motion]
      triggers: ["*"]
      focus: []

    global-gemini:
      name: "Global Validator (Gemini)"
      engine: gemini-cli
      fallback_engine: zen-mcp
      prompt: "_generated/validators/global.md"
      wave: critical
      always_run: true
      blocking: false  # Non-blocking, consensus reinforcement
      timeout: 300
      context7_required: true
      context7_packages: [next, react, uistylescss, zod, typescript, framer-motion]
      triggers: ["*"]
      focus: []

    global-auggie:
      name: "Global Validator (Auggie)"
      engine: auggie-cli
      fallback_engine: zen-mcp
      prompt: "_generated/validators/global.md"
      wave: critical
      always_run: true
      blocking: false  # Non-blocking, additional AI perspective
      timeout: 600
      context7_required: false  # Auggie uses its own codebase context engine
      context7_packages: []
      triggers: ["*"]
      focus: []

    # Critical validators - important but triggered by patterns
    security:
      name: "Security Validator"
      engine: codex-cli
      fallback_engine: zen-mcp
      prompt: "critical/security.md"
      wave: critical
      always_run: false
      blocking: true
      timeout: 300
      context7_required: true
      context7_packages: [next, zod]
      triggers: ["*"]
      focus: [authentication, authorization, input-validation, sql-injection, xss, csrf, secrets]

    performance:
      name: "Performance Validator"
      engine: codex-cli
      fallback_engine: zen-mcp
      prompt: "critical/performance.md"
      wave: critical
      always_run: false
      blocking: true
      timeout: 300
      context7_required: true
      context7_packages: [next, react]
      triggers: ["*"]
      focus: [bundle-size, queries, n-plus-1, caching, memory-leaks]

    coderabbit:
      name: "CodeRabbit AI Review"
      engine: coderabbit-cli
      fallback_engine: zen-mcp
      prompt: "critical/coderabbit.md"
      wave: critical
      always_run: false
      blocking: true
      timeout: 600
      context7_required: false
      context7_packages: []
      triggers: ["*"]
      focus: []

    # Specialized validators - file-pattern triggered
    react:
      name: "React Validator"
      engine: codex-cli
      fallback_engine: zen-mcp
      prompt: "specialized/react.md"
      wave: comprehensive
      always_run: false
      blocking: false
      timeout: 300
      context7_required: true
      context7_packages: [react, uistylescss]
      triggers: ["**/*.tsx", "**/*.jsx", "**/components/**/*"]
      focus: []

    nextjs:
      name: "Next.js Validator"
      engine: codex-cli
      fallback_engine: zen-mcp
      prompt: "specialized/nextjs.md"
      wave: comprehensive
      always_run: false
      blocking: false
      timeout: 300
      context7_required: true
      context7_packages: [next, react]
      triggers: ["app/**/*.tsx", "**/route.ts", "**/layout.tsx", "**/page.tsx"]
      focus: []

    api:
      name: "API Validator"
      engine: codex-cli
      fallback_engine: zen-mcp
      prompt: "specialized/api.md"
      wave: comprehensive
      always_run: false
      blocking: false
      timeout: 300
      context7_required: true
      context7_packages: [next, zod, typescript]
      triggers: ["**/api/**/*.ts", "**/route.ts"]
      focus: []

    prisma:
      name: "Prisma Validator"
      engine: codex-cli
      fallback_engine: zen-mcp
      prompt: "specialized/database.md"
      wave: comprehensive
      always_run: false
      blocking: true
      timeout: 300
      context7_required: true
      context7_packages: [prisma]
      triggers: ["schema.*", "**/*.sql", "prisma/**/*", "migrations/**/*", "db/**/*", "schema.prisma"]
      focus: []

    testing:
      name: "Testing Validator"
      engine: codex-cli
      fallback_engine: zen-mcp
      prompt: "specialized/testing.md"
      wave: comprehensive
      always_run: false
      blocking: true
      timeout: 300
      context7_required: false
      context7_packages: [typescript, vitest]
      triggers: ["**/*.test.ts", "**/*.test.tsx", "**/*.spec.ts", "**/*.spec.tsx"]
      focus: []

  # Wave definitions (execution groups)
  # Waves define the order and behavior of validator execution
  waves:
    - name: critical
      validators:
        - global-codex
        - global-claude
        - global-gemini
        - global-auggie
        - security
        - performance
        - coderabbit
      execution: parallel
      continue_on_fail: false
      requires_previous_pass: false

    - name: comprehensive
      validators:
        - react
        - nextjs
        - api
        - prisma
        - testing
      execution: parallel
      continue_on_fail: true
      requires_previous_pass: true

  # Artifact paths for evidence storage
  artifactPaths:
    bundleSummaryFile: "bundle-approved.json"
    implementationReportFile: "implementation-report.json"

  # Approval criteria (documentation only, logic uses blocking field)
  approvalCriteria:
    globalValidators:
      global-codex: "MUST approve (blocking)"
      global-claude: "MUST approve (blocking)"
      global-gemini: "SHOULD approve (non-blocking, consensus reinforcement)"
      global-auggie: "SHOULD approve (non-blocking, additional AI perspective)"
    criticalValidators:
      security: "MUST approve (blocking)"
      performance: "MUST approve (blocking)"
      coderabbit: "MUST approve (blocking)"
    specializedValidators:
      prisma: "MUST approve (blocking)"
      testing: "MUST approve (blocking)"
      react: "SHOULD approve (non-blocking)"
      nextjs: "SHOULD approve (non-blocking)"
      api: "SHOULD approve (non-blocking)"
