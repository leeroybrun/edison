# Pal MCP Configuration
# Settings for Pal MCP server integration

pal:
  retry:
    max_attempts: 3
    initial_delay_seconds: 1.0
    backoff_factor: 2.0
  secret_rotation:
    enabled: false
    check_interval_hours: 24

  # Models for which Edison should generate generic Pal system prompts
  # (written to `.pal/conf/systemprompts/clink/project/{model}_{role}.txt`).
  prompt_models: ["codex", "claude", "gemini"]

  # Template sources used by the Pal adapter.
  templates:
    # Workflow loop section appended to generic + project role prompts.
    # Relative paths are resolved against project root first, then core templates.
    workflow_loop: "templates/pal/workflow-loop.txt"

  # Project-scoped CLI client definitions for Pal's `clink` tool.
  #
  # Pal loads these JSON files via the `CLI_CLIENTS_CONFIG_PATH` environment variable.
  # Edison generates them into `.pal/conf/cli_clients/*.json` and points Pal at that directory.
  cli_clients:
    enabled: true

    # Which CLI clients to emit configs for (matches Pal's built-in internal defaults).
    clients:
      claude:
        command: "claude"
        additional_args: ["--permission-mode", "acceptEdits", "--model", "sonnet"]
        env: {}
      codex:
        command: "codex"
        additional_args: ["--json"]
        env: {}
      gemini:
        command: "gemini"
        additional_args: ["--yolo"]
        env: {}

    # Role generation rules for the generated cli_clients configs.
    roles:
      # Always include these roles (they map to Pal system prompt files generated by Edison).
      builtin: ["default", "planner", "codereviewer"]

      # Also expose Edison-composed agent/validator prompts as Pal roles.
      include_generated_agents: true
      include_generated_validators: true
      agent_role_prefix: "project-"
      validator_role_prefix: "validator-"
