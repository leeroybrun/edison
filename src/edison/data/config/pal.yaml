# Pal MCP Configuration
# Settings for Pal MCP server integration

pal:
  retry:
    max_attempts: 3
    initial_delay_seconds: 1.0
    backoff_factor: 2.0
  secret_rotation:
    enabled: false
    check_interval_hours: 24

  # Base model used to compose the shared Pal builtin prompts (default/planner/codereviewer).
  # Prompts are shared across CLI clients (no per-model duplication).
  prompt_base_model: "codex"

  # Project-scoped CLI client definitions for Pal's `clink` tool.
  #
  # Pal loads these JSON files via the `CLI_CLIENTS_CONFIG_PATH` environment variable.
  # Edison generates them into `.pal/conf/cli_clients/*.json` and points Pal at that directory.
  cli_clients:
    enabled: true

    # Which CLI clients to emit configs for (matches Pal's built-in internal defaults).
    clients:
      claude:
        command: "claude"
        additional_args: ["--permission-mode", "acceptEdits", "--model", "opus", "--allowedTools", "mcp__playwright__*"]
        env: {}
      codex:
        command: "codex"
        additional_args: ["--json"]
        env: {}
        mcp_override_style: "codex_config"
      gemini:
        command: "gemini"
        additional_args: ["--yolo"]
        env: {}

    # Role generation rules for the generated cli_clients configs.
    roles:
      # Always include these roles (they map to Pal system prompt files generated by Edison).
      builtin: ["default", "planner", "codereviewer"]

      # Also expose Edison-composed agent/validator prompts as Pal roles.
      include_generated_agents: true
      include_generated_validators: true
      prefixes:
        agent: "agent-"
        validator: "validator-"
