# CodeRabbit Configuration
# AI-powered code review tool configuration
# See: https://docs.coderabbit.ai/reference/configuration

coderabbit:
  # Language for reviews and comments
  language: "en-US"

  # Early access features
  early_access: false

  # Review configuration
  reviews:
    # Review profile: "chill" (relaxed) or "assertive" (strict)
    profile: "assertive"

    # Request changes workflow (blocks PR merge until addressed)
    request_changes_workflow: false

    # Generate high-level summary
    high_level_summary: true

    # Include poem in review
    poem: false

    # Show review status
    review_status: true

    # Collapse walkthrough in PR comment
    collapse_walkthrough: false

    # Auto-review settings
    auto_review:
      enabled: true
      # Review draft PRs
      drafts: false
      # Review base branches (main, master, develop)
      base_branches: []

    # Path-specific instructions
    path_instructions:
      - path: "**/*.py"
        instructions: |
          - Follow PEP 8 style guidelines
          - Ensure proper type hints
          - Check for security vulnerabilities
          - Verify proper error handling

      - path: "**/*.ts"
        instructions: |
          - Follow TypeScript best practices
          - Ensure proper type safety
          - Check for memory leaks
          - Verify async/await usage

      - path: "**/*.yaml"
        instructions: |
          - Validate YAML syntax
          - Check for proper indentation
          - Verify required fields

      - path: "**/test_*.py"
        instructions: |
          - Verify test coverage
          - Check for proper assertions
          - Ensure tests are isolated
          - Validate test naming conventions

    # Static analysis tools
    tools:
      # Secret scanner
      gitleaks:
        enabled: true

      # Infrastructure as code security scanner
      checkov:
        enabled: false

      # YAML linter
      yamllint:
        enabled: true

  # Chat configuration
  chat:
    # Auto-reply to questions
    auto_reply: true

  # Knowledge base configuration
  knowledge_base:
    # Learnings from previous reviews
    learnings: true
    # Optional external documentation URLs
    # external_sources: []
