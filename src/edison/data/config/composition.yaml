# Composition system configuration
# Controls prompt composition, orchestrator manifests, and agent assembly

composition:
  # Workflow loop instructions for orchestrators
  workflowLoop:
    command: "scripts/session next <session-id>"
    frequency: "Before EVERY action"
    readOrder:
      - "1. üìã APPLICABLE RULES (read FIRST)"
      - "2. üéØ RECOMMENDED ACTIONS (read AFTER rules)"
      - "3. ü§ñ DELEGATION HINT (follow priority chain)"
      - "4. üîç VALIDATORS (auto-detected from git diff)"

  # Metadata inference for validators
  metadata:
    defaults:
      model: "codex"
      alwaysRun: false
      blocksOnFail: false
      triggers:
        - "*"

    # Search paths for validator definitions (ordered by priority)
    searchPaths:
      - "{project_dir}/_generated/validators/{validator_id}.md"
      - "{project_dir}/validators/specialized/{validator_id}.md"
      - "{repo_root}/.edison/core/validators/specialized/{validator_id}.md"
      - "{packs_dir}/{pack}/validators/{validator_id}.md"
